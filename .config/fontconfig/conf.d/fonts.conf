<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "urn:fontconfig:fonts.dtd">
<fontconfig>

  <!-- Core rasterization: modern, consistent, no DPI forcing -->
  <match target="pattern">
    <edit name="antialias" mode="assign"><bool>true</bool></edit>
    <edit name="hinting"   mode="assign"><bool>true</bool></edit>
    <edit name="autohint"  mode="assign"><bool>true</bool></edit>
    <edit name="hintstyle" mode="assign"><const>hintslight</const></edit>
    <edit name="lcdfilter" mode="assign"><const>lcddefault</const></edit>
    <edit name="rgba"      mode="assign"><const>rgb</const></edit>
    <edit name="embeddedbitmap" mode="assign"><bool>false</bool></edit>
  </match>

  <!-- Default OpenType features: safe, typical text behavior -->
  <match target="font">
    <edit name="fontfeatures" mode="assign">
      <string>kern on</string>
      <string>liga on</string>
      <string>clig on</string>
      <string>calt on</string>
      <string>ccmp on</string>
    </edit>
  </match>

  <!-- Code fonts: enable ligatures/contextuals -->
  <match target="font">
    <or>
      <test name="family"><string>Maple Mono NF</string></test>
      <test name="family"><string>Cartograph CF</string></test>
      <test name="family"><string>Pitagon Sans Mono</string></test>
      <test name="family" compare="contains"><string>Monaspace</string></test>
      <test name="family"><string>Cascadia Code</string></test>
      <test name="family"><string>Recursive Mono</string></test>
      <test name="family"><string>Rec Mono Linear</string></test>
    </or>
    <edit name="fontfeatures" mode="append">
      <string>liga on</string>
      <string>clig on</string>
      <string>calt on</string>
    </edit>
  </match>

  <!--  SARASA GOTHIC -->
  <alias binding="strong">
    <family>sans-serif</family>
    <prefer>
      <family>Sarasa Gothic SC</family>  <!-- Latin + Simplified CJK -->
      <family>Sarasa Gothic TC</family>  <!-- Traditional -->
      <family>Sarasa Gothic J</family>   <!-- Japanese -->
      <family>Sarasa Gothic K</family>   <!-- Korean -->
      <family>Sarasa Gothic</family>
      <!-- Noto fallback -->
      <family>Noto Sans CJK SC</family>
      <family>Noto Sans CJK TC</family>
      <family>Noto Sans CJK JP</family>
      <family>Noto Sans CJK KR</family>
      <family>Noto Sans</family>
    </prefer>
  </alias>

  <!-- Serif: Noto -->
  <alias binding="strong">
    <family>serif</family>
    <prefer>
      <family>Noto Serif CJK SC</family>
      <family>Noto Serif CJK TC</family>
      <family>Noto Serif CJK JP</family>
      <family>Noto Serif CJK KR</family>
      <family>Noto Serif</family>
    </prefer>
  </alias>

  <alias binding="weak">
    <family>monospace</family>
    <prefer>
      <family>Maple Mono NF</family>
      <family>Cascadia Code</family>
      <family>Cascadia Code PL</family>
      <family>Cartograph CF</family>
      <family>Sarasa Mono SC</family>
      <family>Sarasa Mono TC</family>
      <family>Sarasa Mono J</family>
      <family>Sarasa Mono K</family>
      <family>Sarasa Mono</family>
      <family>Noto Sans Mono</family>
    </prefer>
  </alias>

  <!-- Emoji -->
  <alias binding="strong">
    <family>emoji</family>
    <prefer>
      <family>Noto Color Emoji</family>
      <family>Noto Emoji</family>
    </prefer>
  </alias>

  <match target="font">
    <test name="family"><string>Noto Color Emoji</string></test>
    <edit name="embeddedbitmap" mode="assign"><bool>true</bool></edit>
    <edit name="rgba" mode="assign"><const>none</const></edit>
    <edit name="hintstyle" mode="assign"><const>hintnone</const></edit>
  </match>

  <!-- Prefer Sarasa > Noto CJK -->
  <alias binding="same"><family>Noto Sans CJK SC</family><prefer><family>Sarasa Gothic SC</family></prefer></alias>
  <alias binding="same"><family>Noto Sans CJK TC</family><prefer><family>Sarasa Gothic TC</family></prefer></alias>
  <alias binding="same"><family>Noto Sans CJK JP</family><prefer><family>Sarasa Gothic J</family></prefer></alias>
  <alias binding="same"><family>Noto Sans CJK KR</family><prefer><family>Sarasa Gothic K</family></prefer></alias>

  <!-- Legacy -->
  <alias binding="same"><family>Helvetica</family><prefer><family>sans-serif</family></prefer></alias>
  <alias binding="same"><family>Arial</family><prefer><family>sans-serif</family></prefer></alias>
  <alias binding="same"><family>Times</family><prefer><family>serif</family></prefer></alias>
  <alias binding="same"><family>Times New Roman</family><prefer><family>serif</family></prefer></alias>
  <alias binding="same"><family>Courier</family><prefer><family>monospace</family></prefer></alias>
  <alias binding="same"><family>Courier New</family><prefer><family>monospace</family></prefer></alias>

</fontconfig>
